<div class="legend" [ngClass]="getLayoutClass()" role="group" [attr.aria-label]="title">
  @if (title) {
    <h3 class="legend-title">{{ title }}</h3>
  }

  <div class="legend-items">
    @for (item of legendItems$ | async; track item.class) {
      <div class="legend-item" [attr.data-class]="item.class">
        <div class="legend-item-chip">
          <span
            class="legend-color-indicator"
            [style.background-color]="item.color"
            [attr.aria-label]="item.label + ' color indicator'"
            role="img"
          ></span>

          @if (showIcons && item.icon) {
            <mat-icon class="legend-icon" [attr.aria-hidden]="true">{{ item.icon }}</mat-icon>
          }

          <span class="legend-label">{{ item.label }}</span>
        </div>

        @if (showDescriptions && item.description) {
          <p class="legend-description">{{ item.description }}</p>
        }
      </div>
    }
  </div>
</div>
